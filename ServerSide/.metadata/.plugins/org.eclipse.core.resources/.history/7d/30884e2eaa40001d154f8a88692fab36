package com.account.service;

import java.util.List;
import java.util.Optional;

import javax.management.RuntimeErrorException;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.account.entity.Account;
import com.account.entity.AccountCreationStatus;
import com.account.entity.TransactionStatus;
import com.account.repository.AccountCreationStatusRepo;
import com.account.repository.AccountRepo;

@Service
public class AccountServiceImpl implements IAccountService {
@Autowired
AccountRepo accountRepo;
@Autowired
AccountCreationStatusRepo accountCrRepo;

@Override
public AccountCreationStatus saveAccount(Account account) throws Exception {
	Account acc=accountRepo.save(account);
	AccountCreationStatus accountCreationStaus= new AccountCreationStatus();
	if(acc.getAccountId()!=null) {
	accountCreationStaus.setAccountId(acc.getAccountId());
	accountCreationStaus.setMessage("Account Created Sucessfully");
	accountCrRepo.save(accountCreationStaus);
	}else { throw new Exception("Invalid Credetials");}
	return accountCreationStaus;
}

@Override
public List<Account> getbycustomerId(Integer customerId) {
	// TODO Auto-generated method stub
	return  accountRepo.findBycustomerId(customerId);
}

@Override
public Optional<Account> getbyaccountId(Integer accountId) {

	return accountRepo.findById(accountId);
}

@Override
public TransactionStatus depositAmount(Account account) {
	// TODO Auto-generated method stub
	return null;
}


}
